/*!
 * Kalmanjs
 * http://github.com/wouterbulten/kalmanjs
 * Version: 1.0.0-beta
 *
 * Copyright 2015 Wouter Bulten
 * Released under the GNU LESSER GENERAL PUBLIC LICENSE v3
 */
 "use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,i){for(var s=0;s<i.length;s++){var e=i[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(i,s,e){return s&&t(i.prototype,s),e&&t(i,e),i}}(),KalmanFilter=function(){function t(){var i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],s=i.R,e=void 0===s?1:s,n=i.Q,a=void 0===n?1:n,r=i.A,h=void 0===r?1:r,o=i.B,u=void 0===o?0:o,c=i.C,l=void 0===c?1:c;_classCallCheck(this,t),this.R=e,this.Q=a,this.A=h,this.C=l,this.B=u,this.cov=0/0,this.x=0/0}return _createClass(t,[{key:"filter",value:function(t){var i=arguments.length<=1||void 0===arguments[1]?0:arguments[1];if(isNaN(this.x))this.x=1/this.C*t,this.cov=1/this.C*this.Q*(1/this.C);else{var s=this.A*this.x+this.B*i,e=this.A*this.cov*this.A+this.R,n=e*this.C*(1/(this.C*e*this.C+this.Q));this.x=s+n*(t-this.C*s),this.cov=e-n*this.C*e}return this.x}},{key:"lastMeasurement",value:function(){return this.x}},{key:"setMeasurementNoise",value:function(t){this.Q=t}},{key:"setProcessNoise",value:function(t){this.R=t}}]),t}();
